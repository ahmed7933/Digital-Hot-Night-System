<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hot Night ğŸ”¥ | Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;800&display=swap" rel="stylesheet">
    
    <link rel="preload" as="image" href="images/cover1.webp">
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@3/dist/fp.min.js"></script>

    <style>
        :root { --primary: #d4af37; --accent: #e50914; --blue: #00bfff; --green: #2ecc71; --bg: #050505; }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; outline: none; }
        body { margin: 0; background: radial-gradient(circle at 50% 50%, #150505 0%, #000 90%); font-family: 'Cairo'; color: white; height: 100dvh; overflow: hidden; display: flex; justify-content: center; align-items: center; }
        
        /* Ø§Ù„Ø´Ø§Ø´Ø§Øª */
        .screen { display: none; width: 100%; height: 100%; position: relative; z-index: 2; flex-direction: column; align-items: center; padding: 15px; overflow-y: auto; opacity: 0; transition: opacity 0.3s; }
        .screen.active { display: flex; opacity: 1; }

        /* Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… (Ù†ÙØ³ Ø§Ù„Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¨Ù‚) */
        .login-box { background: rgba(20,20,20,0.95); border: 1px solid #333; padding: 25px; border-radius: 20px; width: 100%; max-width: 350px; text-align: center; box-shadow: 0 0 40px rgba(212, 175, 55, 0.1); }
        .input-vip { background: #111; border: 1px solid #444; padding: 12px; border-radius: 10px; color: white; width: 100%; text-align: center; margin-bottom: 15px; font-family: 'Cairo'; font-size: 1rem; }
        .btn-gold { background: linear-gradient(90deg, #d4af37, #b8860b); color: black; font-weight: bold; padding: 12px; width: 100%; border-radius: 50px; border: none; cursor: pointer; font-size: 1rem; margin-bottom: 10px; }
        
        .link-text { color: var(--primary); font-size: 0.85rem; text-decoration: underline; cursor: pointer; margin-top: 10px; display: block; }
        .success-box { border: 1px solid var(--green); background: rgba(46, 204, 113, 0.1); padding: 15px; border-radius: 10px; margin-top: 15px; display: none; }
        .code-display { font-size: 2rem; font-weight: bold; color: var(--primary); letter-spacing: 3px; margin: 10px 0; font-family: monospace; }

        /* Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ù€ CSS Ù„Ù„Ø£Ù„Ø¹Ø§Ø¨ (Ù†ÙØ³ Ø§Ù„Ù‚Ø¯ÙŠÙ… Ø¨Ø§Ù„Ø¸Ø¨Ø·) */
        /* ... (Ø§Ø®ØªØµØ§Ø±Ø§Ù‹ Ù„Ù„Ù…Ø³Ø§Ø­Ø©ØŒ Ø§ÙØªØ±Ø¶ ÙˆØ¬ÙˆØ¯ CSS Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ Ù‡Ù†Ø§) ... */
        
        /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ù…ÙŠØ²Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙÙŠØ© */
        .features-box {
            background: rgba(46, 204, 113, 0.05); /* Ø®Ù„ÙÙŠØ© Ø®Ø¶Ø±Ø§Ø¡ Ø®ÙÙŠÙØ© Ø¬Ø¯Ø§Ù‹ */
            border: 1px dashed var(--green); /* Ø¨Ø±ÙˆØ§Ø² Ù…Ù†Ù‚Ø· ÙŠÙˆØ­ÙŠ Ø¨Ø§Ù„Ø¨ÙˆÙ†Øµ */
            border-radius: 15px;
            padding: 15px;
            margin: 20px 0;
            text-align: right;
        }
        .feature-head {
            color: var(--primary);
            font-weight: 900;
            font-size: 0.95rem;
            margin-bottom: 10px;
            text-align: center;
            display: flex; align-items: center; justify-content: center; gap: 5px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .feature-list li {
            color: #ccc;
            font-size: 0.8rem;
            margin-bottom: 8px;
            line-height: 1.5;
            position: relative;
            padding-right: 20px;
        }
        .feature-list li::before {
            content: "âœ”";
            color: var(--green);
            position: absolute;
            right: 0;
            font-weight: bold;
        }
        .feature-list strong { color: white; }
    </style>
</head>
<body>

    <div id="welcome-overlay" style="position:fixed; top:0; left:0; width:100%; height:100%; background:#000; z-index:9999; display:flex; justify-content:center; align-items:center; flex-direction:column; transition: opacity 0.5s;">
        <div style="font-size:3rem; margin-bottom:10px;">ğŸ”¥</div>
        <h1 style="color:var(--primary); font-size: 2rem;">HOT NIGHT</h1>
        <button class="btn-gold" style="width:200px; margin-top:20px;" onclick="initApp()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø³Ù‡Ø±Ø© ğŸš€</button>
    </div>

    <div id="signup" class="screen">
        <div class="login-box" style="margin-top: 20px;">
            <h2 style="color:var(--primary); margin-bottom:5px;">Ø§Ø´ØªØ±Ø§Ùƒ Ø¬Ø¯ÙŠØ¯ âœ¨</h2>
            <p style="color:#888; font-size:0.8rem; margin-bottom:20px;">Ø³Ø¬Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„</p>
            
            <form id="signup-form" onsubmit="handleSignup(event)">
                <input type="text" id="s-name" class="input-vip" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù†Ø§Ø¦ÙŠ" required>
                <input type="tel" id="s-phone" class="input-vip" placeholder="Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨" required>
                
                <select id="s-plan" class="input-vip" style="color:#aaa;">
                    <option value="1 Ø´Ù‡Ø±">Ø¨Ø§Ù‚Ø© Ø´Ù‡Ø± (199 Ø¬.Ù…)</option>
                    <option value="3 Ø´Ù‡ÙˆØ±">Ø¨Ø§Ù‚Ø© 3 Ø´Ù‡ÙˆØ± (499 Ø¬.Ù…)</option>
                    <option value="1 Ø³Ù†Ø©">Ø¨Ø§Ù‚Ø© Ø³Ù†ÙˆÙŠØ© (999 Ø¬.Ù…)</option>
                </select>
<div class="features-box">
                    <div class="feature-head">âœ¨ Ù„ÙŠÙ‡ ØªØ´ØªØ±Ùƒ ÙÙŠ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø§Ù„Ø£ÙƒØ¨Ø±ØŸ</div>
                    <ul class="feature-list">
                        <li><strong>ØªØ­Ø¯ÙŠØ«Ø§Øª Ù…Ø³ØªÙ…Ø±Ø©:</strong> Ø¨Ù†Ø¶ÙŠÙ ÙƒØ±ÙˆØª ÙˆØªØ­Ø¯ÙŠØ§Øª Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ Ø¹Ø´Ø§Ù† Ø§Ù„Ù…Ù„Ù„ Ù…ÙŠØ¹Ø±ÙØ´ Ø·Ø±ÙŠÙ‚ÙƒÙ….</li>
                        <li><strong>Ø£Ù„Ø¹Ø§Ø¨ Ø¬Ø¯ÙŠØ¯Ø©:</strong> ÙƒÙ„ ÙØªØ±Ø© Ø¨Ù†Ù†Ø²Ù„ Ù„Ø¹Ø¨Ø© Ø¬Ø¯ÙŠØ¯Ø© ØªÙ†Ø¶Ù… Ù„Ù„Ø¨Ø§Ù‚Ø© Ù…Ø¬Ø§Ù†Ø§Ù‹ Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ†.</li>
                        <li><strong>Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø³Ø¹Ø§Ø¯Ø©:</strong> (Ù‚Ø±ÙŠØ¨Ø§Ù‹) ÙƒØªØ¨ ÙˆÙ…Ù‚Ø§Ù„Ø§Øª Ø­ØµØ±ÙŠØ© Ù„Ø£Ø³Ø±Ø§Ø± Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„Ø²ÙˆØ¬ÙŠØ© Ø§Ù„Ø³Ø¹ÙŠØ¯Ø©.</li>
                        <li><strong>Ù‡Ø¯Ø§ÙŠØ§ Ø®Ø§ØµØ©:</strong> Ù…Ø³Ø§Ø¨Ù‚Ø§Øª ÙˆØ¬ÙˆØ§Ø¦Ø² Ù„Ù„Ù…Ø´ØªØ±ÙƒÙŠÙ† Ø§Ù„Ù…Ù…ÙŠØ²ÙŠÙ†.</li>
                    </ul>
                </div>

                <button type="submit" class="btn-gold">ØªØ³Ø¬ÙŠÙ„ ÙˆØ§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆØ¯</button>
            </form>

            <div id="success-msg" class="success-box">
                <div style="color:var(--green); font-weight:bold;">ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø¨Ù†Ø¬Ø§Ø­! âœ…</div>
                <p style="font-size:0.8rem; color:#ccc;">Ø®Ø¯ Ø³ÙƒØ±ÙŠÙ† Ø´ÙˆØª Ù„Ù„ÙƒÙˆØ¯ Ø¯Ù‡ ÙˆØ§Ø¨Ø¹ØªÙ„Ù†Ø§ ÙˆØµÙ„ Ø§Ù„Ø¯ÙØ¹ ÙˆØ§ØªØ³Ø§Ø¨ Ø¹Ø´Ø§Ù† Ù†ÙØ¹Ù„Ù‡ÙˆÙ„Ùƒ:</p>
                <div class="code-display" id="generated-code">------</div>
                <button class="btn-gold" style="font-size:0.8rem; background:#333; color:white;" onclick="copyCode()">Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯</button>
                <div style="margin-top:10px;">
                    <a href="#" onclick="show('login')" style="color:var(--primary);">Ø§Ù„Ø°Ù‡Ø§Ø¨ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -></a>
                </div>
            </div>

            <div id="signup-footer">
                <span style="color:#666; font-size:0.8rem;">Ù…Ø¹Ø§Ùƒ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ØŸ</span>
                <span class="link-text" onclick="show('login')">Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„ Ù…Ù† Ù‡Ù†Ø§</span>
            </div>
        </div>
    </div>

    <div id="login" class="screen">
        <div class="login-box" style="margin-top: 50px;">
            <div style="font-size:3rem;">ğŸ”</div>
            <h2 style="color:white; margin:10px 0;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
            <p style="color:#888; font-size:0.8rem; margin-bottom:30px;">Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù„ÙŠ ÙˆØµÙ„Ùƒ Ø¨Ø¹Ø¯ Ø§Ù„Ø¯ÙØ¹</p>
            
            <input type="password" id="pass" class="input-vip" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØªÙØ¹ÙŠÙ„ (6 Ø£Ø±Ù‚Ø§Ù…)">
            <button class="btn-gold" onclick="login()">Ø¯Ø®ÙˆÙ„</button>
            <p id="error" style="color:var(--accent); display:none; margin-top:15px; font-size:0.9rem;"></p>

            <span class="link-text" onclick="show('signup')">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ ÙƒÙˆØ¯ØŸ Ø§Ø´ØªØ±Ùƒ Ø§Ù„Ø¢Ù†</span>
        </div>
    </div>

    <div id="dashboard" class="screen">
        <div style="color:white;">(Ù‡Ù†Ø§ ØªØ¸Ù‡Ø± Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ - Ø§Ù†Ø³Ø® Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø³Ø§Ø¨Ù‚)</div>
    </div>

    <script>
        // ==========================================
        // 0. Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
        // ==========================================
        // âš ï¸âš ï¸ Ø­Ø· Ø±Ø§Ø¨Ø· Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø¨ØªØ§Ø¹Ùƒ Ù‡Ù†Ø§ âš ï¸âš ï¸
        const API_URL = "https://script.google.com/macros/s/AKfycbx_MDppdjfv_a3k6NNloqOUJH3tEF9B2N-sdqyz-knmGQ3156zRbT19XNpzGhKXru6XTQ/exec"; 

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        
        // ... (Ø¯Ø§Ù„Ø© playSound Ù†ÙØ³ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©) ...
        function playSound(type) { /* ... */ }

        // ... (Game Data & Instructions Ù†ÙØ³ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©) ...
        const db = { /* ... */ };

        // ==========================================
        // 1. SYSTEM LOGIC
        // ==========================================
        
        function initApp() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            document.getElementById('welcome-overlay').style.opacity = '0';
            setTimeout(() => document.getElementById('welcome-overlay').style.display = 'none', 500);

            // Ù„Ùˆ Ù…Ø³Ø¬Ù„ Ù‚Ø¨Ù„ ÙƒØ¯Ù‡ØŒ Ø±ÙˆØ­ Ù„Ù„Ø¯Ø´ Ø¨ÙˆØ±Ø¯ØŒ Ù„Ùˆ Ù„Ø£ Ø±ÙˆØ­ Ù„Ù„Ø§Ø´ØªØ±Ø§Ùƒ (Ø£Ùˆ Ø§Ù„Ø¯Ø®ÙˆÙ„)
            if(localStorage.getItem('isLoggedIn') === 'true') {
                checkSubscriptionStatus(localStorage.getItem('hn_user_code'));
            } else {
                show('signup'); // Ø§Ø¨Ø¯Ø£ Ø¨ØµÙØ­Ø© Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
            }
        }

        function show(id) {
            document.querySelectorAll('.screen').forEach(s => { 
                if(s.id !== id) { s.classList.remove('active'); setTimeout(()=> { if(!s.classList.contains('active')) s.style.display='none'; }, 300); }
            });
            const el = document.getElementById(id); el.style.display = 'flex'; setTimeout(()=>el.classList.add('active'), 10);
        }

        // ------------------------------------------
        // SIGN UP LOGIC (Ø§Ù„Ø¬Ø¯ÙŠØ¯)
        // ------------------------------------------
        function handleSignup(e) {
            e.preventDefault();
            const btn = document.querySelector('#signup-form button');
            const name = document.getElementById('s-name').value;
            const phone = document.getElementById('s-phone').value;
            const plan = document.getElementById('s-plan').value;

            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„...";
            btn.disabled = true;

            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø´ÙŠØª
            fetch(API_URL, {
                method: 'POST',
                mode: 'no-cors', // Ù…Ù‡Ù… Ù„ØªÙØ§Ø¯ÙŠ Ù…Ø´Ø§ÙƒÙ„ CORS Ù…Ø¹ Ø¬ÙˆØ¬Ù„
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: `name=${name}&phone=${phone}&plan=${plan}`
            }).then(() => {
                // Ø¬ÙˆØ¬Ù„ Ù…Ø´ Ø¨ÙŠØ±Ø¯ Ø¨Ù€ JSON ÙÙŠ ÙˆØ¶Ø¹ no-corsØŒ ÙØ¨Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
                // Ù„ÙƒÙ† Ù‡Ù†Ø§ Ø³Ù†ÙˆØ§Ø¬Ù‡ Ù…Ø´ÙƒÙ„Ø©: ÙƒÙŠÙ Ù†Ø¹Ø±Ù Ø§Ù„ÙƒÙˆØ¯ØŸ 
                // Ø§Ù„Ø­Ù„ Ø§Ù„Ø£ÙØ¶Ù„: Apps Script ÙŠØ±Ø¯ Ø¨Ù€ JSONP Ø£Ùˆ Ù†Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ GET Ù„Ù„ØªØ³Ø¬ÙŠÙ„ Ø£ÙŠØ¶Ø§Ù‹ (Ø£Ø³Ù‡Ù„)
                registerViaGet(name, phone, plan);
            }).catch(err => {
                alert("Ø­Ø¯Ø« Ø®Ø·Ø£ØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª");
                btn.disabled = false;
                btn.innerText = "ØªØ³Ø¬ÙŠÙ„";
            });
        }

        // Ø§Ø³ØªØ®Ø¯Ø§Ù… GET Ù„Ù„ØªØ³Ø¬ÙŠÙ„ (Ø£Ø¶Ù…Ù† Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¯ Ø¨Ø§Ù„ÙƒÙˆØ¯)
        async function registerViaGet(name, phone, plan) {
            const btn = document.querySelector('#signup-form button');
            try {
                // Ø¨Ù†Ø¨Ø¹Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ£Ù†Ù‡Ø§ login Ø¨Ø³ Ø¨Ø¨Ø§Ø±Ø§Ù…ÙŠØªØ±Ø§Øª Ø²ÙŠØ§Ø¯Ø©
                // Ù„Ø§Ø²Ù… Ù†Ø¹Ø¯Ù„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª ÙÙŠ Ø¬ÙˆØ¬Ù„ Ù„ÙŠÙÙ‡Ù… Ø¥Ù† Ø¯Ù‡ ØªØ³Ø¬ÙŠÙ„ (Ø¨Ø³ Ø®Ù„ÙŠÙ†Ø§ Ù†Ø³ØªØ®Ø¯Ù… POST ÙÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª Ø£Ø­Ø³Ù†)
                // Ø§Ù„Ø­Ù„ Ø§Ù„Ø¨Ø¯ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹: ÙÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª doGet Ø¶ÙŠÙ Ø´Ø±Ø· Ù„Ùˆ ÙÙŠÙ‡ name Ùˆ phone ÙŠØ¨Ù‚Ù‰ Ø¯Ù‡ ØªØ³Ø¬ÙŠÙ„
                
                // âš ï¸ ØªØ¹Ø¯ÙŠÙ„: Ø³Ù†Ø³ØªØ®Ø¯Ù… POST Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ Ø¹Ø¨Ø± form submission Ø®ÙÙŠ Ø£Ùˆ Ù†Ø¹Ø¯Ù„ doGet ÙÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª
                // Ù„ØªØ¨Ø³ÙŠØ· Ø§Ù„Ø£Ù…Ø± Ø¹Ù„ÙŠÙƒ: Ø³Ù†Ù‚ÙˆÙ… Ø¨ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ÙƒÙˆØ¯ Ù‡Ù†Ø§ ÙˆØ¹Ø±Ø¶Ù‡ØŒ Ø«Ù… Ø¥Ø±Ø³Ø§Ù„Ù‡ Ù„Ù„Ø³ÙŠØ±ÙØ± Ù„ÙŠØ­ÙØ¸Ù‡ "Pending"
                
                // 1. ØªÙˆÙ„ÙŠØ¯ ÙƒÙˆØ¯
                const code = Math.floor(100000 + Math.random() * 900000);
                
                // 2. Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø³ÙŠØ±ÙØ± Ù„ÙŠØ­ÙØ¸Ù‡Ø§
                // Ù‡Ù†Ø³ØªØ®Ø¯Ù… fetch GET Ù„Ø³Ù‡ÙˆÙ„Ø© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø±Ø¯
                // (Ù…Ù„Ø§Ø­Ø¸Ø©: Ø¯Ù‡ ÙŠØªØ·Ù„Ø¨ ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø³ÙŠØ· ÙÙŠ Apps Script doGet Ù„ÙŠØ¹Ø§Ù„Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„)
                // Ù„ÙƒÙ†ØŒ Ø¹Ø´Ø§Ù† Ù…Ù†Ù„Ø®Ø¨Ø·ÙƒØ´ØŒ Ø®Ù„ÙŠÙ†Ø§ Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù„ÙŠ ÙØ§ØªØª ÙÙŠ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª doPost
                
                // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø®Ø·Ø© Ø§Ù„Ù€ POST:
                // Ø¨Ù…Ø§ Ø£Ù† no-cors Ù„Ø§ ÙŠØ¹ÙŠØ¯ Ø¯Ø§ØªØ§ØŒ Ø³Ù†Ø¬Ø¹Ù„ Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª ÙŠØ±Ø³Ù„ Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§ØªØ³Ø§Ø¨ØŒ ÙˆÙ†Ù‚ÙˆÙ„ Ù„Ù„Ø¹Ù…ÙŠÙ„ "Ù‡ÙŠØµÙ„Ùƒ ÙˆØ§ØªØ³Ø§Ø¨"
                // Ø£Ùˆ Ù†Ø¸Ù‡Ø± Ù„Ù‡ Ø±Ø³Ø§Ù„Ø©: "ØªÙ… Ø§Ù„ØªØ³Ø¬ÙŠÙ„ØŒ ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ ÙˆØ§ØªØ³Ø§Ø¨ Ù„ØªÙØ¹ÙŠÙ„ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ø±Ù‚Ù… ØªÙ„ÙŠÙÙˆÙ†Ùƒ"
                
                document.getElementById('signup-form').style.display = 'none';
                document.getElementById('signup-footer').style.display = 'none';
                document.getElementById('success-msg').style.display = 'block';
                document.getElementById('generated-code').innerText = "ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"; 
                document.querySelector('#success-msg p').innerText = "ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ! ØªÙˆØ§ØµÙ„ Ù…Ø¹Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙˆÙ‚ÙˆÙ„Ù†Ø§ Ø§Ø³Ù…Ùƒ Ù„ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙˆØ§Ø³ØªÙ„Ø§Ù… Ø§Ù„ÙƒÙˆØ¯.";
                
            } catch(e) {
                console.error(e);
            }
        }
        
        // ------------------------------------------
        // LOGIN LOGIC
        // ------------------------------------------
        async function login() {
            const val = document.getElementById('pass').value;
            const btn = document.querySelector('#login .btn-gold');
            const errorMsg = document.getElementById('error');
            
            // Ø¨ØµÙ…Ø© Ø§Ù„Ø¬Ù‡Ø§Ø²
            let deviceId = localStorage.getItem('hn_device_id');
            if (!deviceId) {
                deviceId = 'dev_' + Math.random().toString(36).substr(2, 9);
                localStorage.setItem('hn_device_id', deviceId);
            }

            btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...";
            btn.disabled = true;
            errorMsg.style.display = 'none';

            try {
                const response = await fetch(`${API_URL}?code=${val}&deviceId=${deviceId}`);
                const data = await response.json();

                if (data.valid === true) {
                    localStorage.setItem('isLoggedIn', 'true');
                    localStorage.setItem('hn_user_code', val);
                    show('dashboard');
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                errorMsg.style.display = 'block';
                errorMsg.innerText = error.message || "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„";
            } finally {
                btn.innerText = "Ø¯Ø®ÙˆÙ„ ğŸ”“";
                btn.disabled = false;
            }
        }

        async function checkSubscriptionStatus(code) {
            // (Ù†ÙØ³ ÙƒÙˆØ¯ Ø§Ù„ØªØ­Ù‚Ù‚ Ø§Ù„Ø³Ø§Ø¨Ù‚)
            let deviceId = localStorage.getItem('hn_device_id');
             try {
                const response = await fetch(`${API_URL}?code=${code}&deviceId=${deviceId}`);
                const data = await response.json();
                if (data.valid === true) show('dashboard', false);
                else {
                    localStorage.removeItem('isLoggedIn');
                    show('login', false);
                    alert(data.message);
                }
            } catch (e) { show('dashboard', false); }
        }

        // ... (Ø¨Ø§Ù‚ÙŠ Ø¯ÙˆØ§Ù„ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨ ÙˆØ§Ù„Ù…Ù†Ø·Ù‚) ...

    </script>
</body>
</html>

